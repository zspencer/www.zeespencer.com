<!DOCTYPE html>
<html>
<head>
  <title>The Ruby & Symbol</title>
  <link href="/assets/stylesheets/style.css?1580666945" type="text/css" rel="stylesheet" />
  
  <link rel="canonical" href="" />
  

  <link type="text/atom+xml" rel="alternate" href="http://feeds.feedburner.com/zeespencer"/>
  <meta name="viewport" content="initial-scale=1" />
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
      
      analytics.load("DEDSLhOPXKFCHg4NglvHWqtQg6BgqJy2");
      

      
        analytics.page("Article", null);
      
      }}();
    </script>
    <script type="text/javascript" src="/assets/js/site.js?1580666945"></script>
</head>
<body>
  <div id="page">
  <header>
    <figure>
      <img src="/assets/images/zee.png?1580666945" alt="Zee Spencer" />
    </figure>
    
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <h2>The Ruby & Symbol</h2>
    

  </header>
  <main id="content">
    <section id="article">
<p>&amp; is a powerful ruby operator, when you use it as a unary operator it has two
main use cases:</p>

<p>The most common is to pass an object as a block to a method, like this:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nf">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:nil?</span><span class="p">)</span></code></pre></div>

<p>This calls <code>#to_proc</code> on the symbol <code>:nil?</code>, converts the result into a block,
and passes it to the reject method. A line by line breakdown looks something
like this:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nf">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:nil?</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="nb">proc</span> <span class="o">=</span> <span class="ss">:nil?</span><span class="p">.</span><span class="nf">to_proc</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="nb">proc</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">reject</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="p">.</span><span class="nf">nil?</span> <span class="p">}</span></code></pre></div>

<p>The second is explicitly declaring a block by using the <code>&amp;</code> in a method
definition:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">print_results</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">p</span> <span class="n">block</span><span class="p">.</span><span class="nf">yield</span>
<span class="k">end</span>

<span class="n">print_results</span> <span class="p">{</span> <span class="s2">"bar"</span> <span class="p">}</span></code></pre></div>

<p>With an explicitly named block you can do useful things, like map a block to
all the columns in a table:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">column_map</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="n">table</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">row</span><span class="o">|</span> <span class="n">row</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>

<span class="n">column_map</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]])</span> <span class="p">{</span> <span class="o">|</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">5</span> <span class="p">}</span></code></pre></div>

<p>And of course, explicitly named blocks still allow you to expand an object to a
block:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">column_map</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]],</span> <span class="o">&amp;</span><span class="ss">:odd?</span><span class="p">)</span></code></pre></div>

<p>For more reading on the &amp; operator, check out  <em><a href="http://ablogaboutcode.com/2012/01/04/the-ampersand-operator-in-ruby/">The Ampersand Operator in
Ruby</a></em> by
<a href="https://twitter.com/panthomakos">Pan Thomakos</a>.</p>

<p>I you want to grok blocks, I&#39;d recommend the excellent <em><a href="http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/">Understanding Ruby
Blocks, Procs and
Lambdas</a></em>
by <a href="http://www.robertsosinski.com/">Robert Sosinki</a></p>

</section>

<hr />
<section id="post-tags">
  <p>Browse posts about:
  <ul>
  
  <li><a href="/tags/software.html">software</a></li>
  
  <li><a href="/tags/ruby.html">ruby</a></li>
  
  <li><a href="/tags/tapas.html">tapas</a></li>
  
  </ul></p>
</section>

<section id="newsletter-signup">
  <p>Want to get notified when I publish new articles or update old ones?
  Subscribe to my newsletter. It's a weekly-ish set of interesting links with a
  short essay on programming, design, technical leadership, or anything else
  that strikes my fancy.</p>

  <form id="subscribe-to-newsletter" action="https://tinyletter.com/zspencer" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/zspencer', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
  <p><label for="tlemail">Email address:</label>
  <input placeholder="your-email@example.com" type="text" name="email" id="tlemail" /></p>
  <input type="hidden" value="1" name="embed"/>

  <p>Not sure? <a id="newsletter-archive" href="http://tinyletter.com/zspencer/archive">Read the
    archive.</a></p>
  <input class="button" type="submit" value="Subscribe Now!" />
</form>

<script type="text/javascript">
Track.cta("#subscribe-to-newsletter", "Newsletter Subscription", {
  location: 'bottom',
  color: 'Red',
  category: 'Subscribe',
  pageSubject: 'Article'
});

Track.cta("#newsletter-archive", "Check the Newsletter Archive", {
  location: 'bottom',
  color: 'Red',
  category: 'Investigate me',
  pageSubject: 'Article'
});
</script>

</section>

  </main>
  <div class="push"></div>
  </div>
  <footer>
    <section id="footer-content">
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <p class="license">
        Copyright 2004 - 2014 Zee Spencer. Licensed under
        a <a
           rel="license"
           href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
           Commons Attribution-NonCommercial-ShareAlike 4.0
           International License</a>.
      </p>
    </section>
  </footer>

<script type="text/javascript">

</script>
</body>
</html>

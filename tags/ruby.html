<!DOCTYPE html>
<html>
<head>
  <title></title>
  <link href="style.css" type="text/css" rel="stylesheet" />
  
  <link rel="canonical" href="" />
  

  <link type="text/atom+xml" rel="alternate" href="http://feeds.feedburner.com/zeespencer"/>
  <meta name="viewport" content="initial-scale=1" />
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
      
      analytics.load("DEDSLhOPXKFCHg4NglvHWqtQg6BgqJy2");
      

      
        analytics.page();
      
      }}();
    </script>
    <script type="text/javascript" src="js/site.js"></script>
</head>
<body>
  <div id="page">
  <header>
    <figure>
      <img src="images/zee.png" alt="Zee Spencer" />
    </figure>
    
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <h2></h2>
    

  </header>
  <main id="content">
    <h2>ruby</h2>
<ul>

  
  <li>Running Tests Across Multiple Ruby Versions With Rbenv And Make &ndash;
      <!DOCTYPE html>
<html>
<head>
  <title>Running Tests Across Multiple Ruby Versions With Rbenv And Make</title>
  <link href="style.css" type="text/css" rel="stylesheet" />
  
  <link rel="canonical" href="" />
  

  <link type="text/atom+xml" rel="alternate" href="http://feeds.feedburner.com/zeespencer"/>
  <meta name="viewport" content="initial-scale=1" />
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
      
      analytics.load("DEDSLhOPXKFCHg4NglvHWqtQg6BgqJy2");
      

      
        analytics.page();
      
      }}();
    </script>
    <script type="text/javascript" src="js/site.js"></script>
</head>
<body>
  <div id="page">
  <header>
    <figure>
      <img src="images/zee.png" alt="Zee Spencer" />
    </figure>
    
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <h2>Running Tests Across Multiple Ruby Versions With Rbenv And Make</h2>
    

  </header>
  <main id="content">
    <section id="article">
<p>When writing <a href="http://glossary.codeunion.io/gem/">gems</a>, we frequently want to
verify behavior across a variety of ruby versions. While this is quite <a href="http://docs.travis-ci.com/user/languages/ruby/#Choosing-Ruby-versions-and-implementations-to-test-against">easy
with travis
ci</a>,
running microtests before pushing shrinks the likelihood of breaking the build.</p>

<p>My objectives were to:</p>

<ul>
<li>Run tests against different ruby versions in parallel. I&#39;ve got all these
cores, why not use them?</li>
<li>Auto-run tests on file system changes.</li>
<li>Commands must be discoverable with tab-completion.</li>
<li>Adding additional versions must be relatively painless.</li>
</ul>

<p>After a bit of prototyping, I settled on:</p>

<ul>
<li>The <a href="https://github.com/sstephenson/rbenv">rbenv ruby version manager</a></li>
<li><a href="https://github.com/quackingduck/wach">Wach</a> for re-running a task on file
system change.</li>
<li><a href="https://www.gnu.org/software/make/manual/">GNU Make</a> for defining tasks.</li>
</ul>

<p>For those of you who want the code right now, grab my
<a href="https://github.com/zspencer/make-many-rubies"
id="make-many-rubies-mid">make-many-rubies</a> repo. For those
interested in the thought process, read on.</p>

<h3 id="make-and-rake-better-together">Make and Rake, Better Together.</h3>

<p>Make is a powerful build system. While Rake is great for complex tasks that
require a language with functions and lists, Make
shines at discoverability (<a href="http://bash-completion.alioth.debian.org">free
tab-completion!</a> woo!) and
cross-language support.</p>

<p>I tend to have a Makefile in every project I work on which encapsulate the primary
commands:</p>

<ul>
<li><code>make run</code>     - Runs the project</li>
<li><code>make test</code>    - Tests the project</li>
<li><code>make build</code>   - Builds the project</li>
<li><code>make release</code> - Releases the project artifact.</li>
<li><code>make deploy</code>  - Deploys the project to production.</li>
<li><code>make tbrd</code>    - Pronounced &quot;Tee-bird&quot; tests, builds, releases and deploys
                the project.</li>
</ul>

<p>These tasks allow projects to have a common interface no matter what
language, deployment strategy, or test framework we use.  Not every project has
every task of course; but the convention makes switching between different kinds
of projects in different languages a bit easier.</p>

<h3 id="read-the-source-luke">Read the Source, Luke!</h3>

<p>If you haven&#39;t already, check out the <a
href="https://github.com/zspencer/make-many-rubies"
id="make-many-rubies-bot">make-many-rubies</a> repo. The Makefile is annotated
on every single line; and the Readme provides (hopefully useful) usage
instructions.</p>

<p>Did you find this helpful? I&#39;d love to hear how you keep your code working
across multiple ruby versions or use make to create a common interface
across teams and projects!  Why not <a id="send-email" href="mailto:
zee@wecohere.com">drop me a line</a>?</p>

</section>

<hr />
<section id="post-tags">
  <p>Browse posts about:
  <ul>
  
  <li><a href="software">software</a></li>
  
  <li><a href="testing">testing</a></li>
  
  <li><a href="ruby">ruby</a></li>
  
  <li><a href="devenvironment">devenvironment</a></li>
  
  </ul></p>
</section>

<section id="newsletter-signup">
  <p>Want to get notified when I publish new articles or update old ones?
  Subscribe to my newsletter. It's a weekly-ish set of interesting links with a
  short essay on programming, design, technical leadership, or anything else
  that strikes my fancy.</p>

  <form id="subscribe-to-newsletter" action="https://tinyletter.com/zspencer" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/zspencer', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
  <p><label for="tlemail">Email address:</label>
  <input placeholder="your-email@example.com" type="text" name="email" id="tlemail" /></p>
  <input type="hidden" value="1" name="embed"/>

  <p>Not sure? <a id="newsletter-archive" href="http://tinyletter.com/zspencer/archive">Read the
    archive.</a></p>
  <input class="button" type="submit" value="Subscribe Now!" />
</form>

<script type="text/javascript">
Track.cta("#subscribe-to-newsletter", "Newsletter Subscription", {
  location: 'bottom',
  color: 'Red',
  category: 'Subscribe',
  pageSubject: 'Article'
});

Track.cta("#newsletter-archive", "Check the Newsletter Archive", {
  location: 'bottom',
  color: 'Red',
  category: 'Investigate me',
  pageSubject: 'Article'
});
</script>

</section>

  </main>
  <div class="push"></div>
  </div>
  <footer>
    <section id="footer-content">
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <p class="license">
        Copyright 2004 - 2020 Zee Spencer. Licensed under
        a <a
           rel="license"
           href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
           Commons Attribution-NonCommercial-ShareAlike 4.0
           International License</a>.
      </p>
    </section>
  </footer>

<script type="text/javascript">

Track.cta('#make-many-rubies-mid', 'View Project', {
  color: 'Red',
  location: 'middle',
  category: 'Investigate me',
  pageSubject: "",
});

Track.cta('#make-many-rubies-bot', 'View Project', {
  color: 'Red',
  location: 'bottom',
  category: 'Investigate me',
  pageSubject: "",
});

Track.cta('#send-email', 'Email me', {
  color: 'Red',
  location: 'bottom',
  category: 'Contact',
  pageSubject: "",
});

</script>
</body>
</html>
<br />
      <a href="/running-tests-across-multiple-ruby-versions-with-rbenv-and-make">06 Jan 2015</a>
  </li>
  

  
  <li>Using Nil Effectively &ndash;
      <!DOCTYPE html>
<html>
<head>
  <title>Using Nil Effectively</title>
  <link href="style.css" type="text/css" rel="stylesheet" />
  
  <link rel="canonical" href="" />
  

  <link type="text/atom+xml" rel="alternate" href="http://feeds.feedburner.com/zeespencer"/>
  <meta name="viewport" content="initial-scale=1" />
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
      
      analytics.load("DEDSLhOPXKFCHg4NglvHWqtQg6BgqJy2");
      

      
        analytics.page();
      
      }}();
    </script>
    <script type="text/javascript" src="js/site.js"></script>
</head>
<body>
  <div id="page">
  <header>
    <figure>
      <img src="images/zee.png" alt="Zee Spencer" />
    </figure>
    
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <h2>Using Nil Effectively</h2>
    

  </header>
  <main id="content">
    <section id="article">
<p>We seem to use <code>nil</code>s in place of a default return value in a function. Say you
wanted to write a function that splits a string on its commas:</p>
<div class="highlight"><pre><code class="language-" data-lang="">def nil_split_on_comma(string)
  return nil unless string.include? ","
  string.split(",")
end
</code></pre></div>
<p>While this seems reasonable it can have some unfortunate side effects:</p>
<div class="highlight"><pre><code class="language-" data-lang="">p nil_split_on_comma("asdfqwer").map(&amp;:length)
</code></pre></div>
<p>Woops! Undefined method map for <code>nil</code> class! Let&#39;s try again!</p>
<div class="highlight"><pre><code class="language-" data-lang="">def better_split_on_comma(string)
  return [] unless string.include? ","
  string.split(",")
end

p better_split_on_comma("asdfqwer").map(&amp;:length)
</code></pre></div>
<p>Ah! Much better! Because this function always returns an object of the same type
it can be used without checking the value! The astute reader will spot this as
an example of the <a href="http://c2.com/cgi/wiki?NullObject">Null Object Pattern</a></p>

<p>In spite of it&#39;s lack of suitability as a replacement for a reasonable default
value, I&#39;m a fan of <code>nil</code>. I especially like it&#39;s use as a <a href="http://en.wikipedia.org/wiki/Null_character">null
terminator</a>:</p>
<div class="highlight"><pre><code class="language-" data-lang="">def iterable_fetch_val(index)
  data = "1234567890"
  data[index]
end

index = 0

while iterable_fetch_val(index)
  p iterable_fetch_val(index)
  index += 1
end
</code></pre></div>
<p>Here we&#39;re relying on the side effect that a <code>nil</code> value is also falsey. I&#39;m
less edgey about this because this functions use case is an iterator, instead of
an accessor; but it&#39;s still a little iffy.</p>

<p>However, if you return an empty string instead of a falsey value it requires an
additional method call to use as an iterator:</p>
<div class="highlight"><pre><code class="language-" data-lang="">def uniterable_fetch_val(index)
  data = "1234567890"
  data[index] || ""
end

index = 0
until uniterable_fetch_val(index).empty?
  p uniterable_fetch_val(index)
  index += 1
end
</code></pre></div>
<p>As you can see, <code>nil</code>&#39;s aren&#39;t all bad. However they should be used with
precision. Think about how varyied return types can cause complexity to move
through the code.</p>

</section>

<hr />
<section id="post-tags">
  <p>Browse posts about:
  <ul>
  
  <li><a href="tapas">tapas</a></li>
  
  <li><a href="ruby">ruby</a></li>
  
  <li><a href="software">software</a></li>
  
  </ul></p>
</section>

<section id="newsletter-signup">
  <p>Want to get notified when I publish new articles or update old ones?
  Subscribe to my newsletter. It's a weekly-ish set of interesting links with a
  short essay on programming, design, technical leadership, or anything else
  that strikes my fancy.</p>

  <form id="subscribe-to-newsletter" action="https://tinyletter.com/zspencer" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/zspencer', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
  <p><label for="tlemail">Email address:</label>
  <input placeholder="your-email@example.com" type="text" name="email" id="tlemail" /></p>
  <input type="hidden" value="1" name="embed"/>

  <p>Not sure? <a id="newsletter-archive" href="http://tinyletter.com/zspencer/archive">Read the
    archive.</a></p>
  <input class="button" type="submit" value="Subscribe Now!" />
</form>

<script type="text/javascript">
Track.cta("#subscribe-to-newsletter", "Newsletter Subscription", {
  location: 'bottom',
  color: 'Red',
  category: 'Subscribe',
  pageSubject: 'Article'
});

Track.cta("#newsletter-archive", "Check the Newsletter Archive", {
  location: 'bottom',
  color: 'Red',
  category: 'Investigate me',
  pageSubject: 'Article'
});
</script>

</section>

  </main>
  <div class="push"></div>
  </div>
  <footer>
    <section id="footer-content">
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <p class="license">
        Copyright 2004 - 2020 Zee Spencer. Licensed under
        a <a
           rel="license"
           href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
           Commons Attribution-NonCommercial-ShareAlike 4.0
           International License</a>.
      </p>
    </section>
  </footer>

<script type="text/javascript">

</script>
</body>
</html>
<br />
      <a href="/using-nil-effectively">17 Feb 2013</a>
  </li>
  

  
  <li>Ambiguity In Code Is an Opportunity to Refactor &ndash;
      <!DOCTYPE html>
<html>
<head>
  <title>Ambiguity In Code Is an Opportunity to Refactor</title>
  <link href="style.css" type="text/css" rel="stylesheet" />
  
  <link rel="canonical" href="" />
  

  <link type="text/atom+xml" rel="alternate" href="http://feeds.feedburner.com/zeespencer"/>
  <meta name="viewport" content="initial-scale=1" />
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
      
      analytics.load("DEDSLhOPXKFCHg4NglvHWqtQg6BgqJy2");
      

      
        analytics.page();
      
      }}();
    </script>
    <script type="text/javascript" src="js/site.js"></script>
</head>
<body>
  <div id="page">
  <header>
    <figure>
      <img src="images/zee.png" alt="Zee Spencer" />
    </figure>
    
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <h2>Ambiguity In Code Is an Opportunity to Refactor</h2>
    

  </header>
  <main id="content">
    <section id="article">
<p>There&#39;s a common design principle that states &quot;Design the system to prevent
errors from occuring.&quot; Lean manufacturing calls this
<em><a href="http://en.wikipedia.org/wiki/Poka-yoke">Poka-yoke</a></em>. Interaction design calls
these <em><a href="http://www.interaction-design.org/encyclopedia/forcing_functions.html">forcing
functions</a></em>.</p>

<p>Since a much of the time building software is spent reading code, it&#39;s
important to decrease the amount of errors in understanding while we read.</p>

<p>One way to do this is to decrease ambiguity. Consider the <code>&amp;</code> symbol in Ruby.
It&#39;s a method call on some ruby classes, <a href="/musings/the-ruby-&-symbol/">a unary
operator</a> for converting objects to blocks, and a
binary operator for calling the <code>&amp;</code> method without using a <code>.</code>.</p>

<p>In order to properly understand what the <code>&amp;</code> is doing you have to figure out
which of it&#39;s three roles it&#39;s fulfilling. If it&#39;s a binary operator or a method
call you also must understand what that method is in the context of which object
it&#39;s using.</p>

<p>For example, <code>1 | 5</code> is a <a href="http://en.wikipedia.org/wiki/Bitwise_operation#OR">bitwise
or</a> operation, while <code>[1,3,5]
| [3,5,7]</code> is a [set union](http://en.wikipedia.org/wiki/Union<em>(set</em>theory).</p>

<p>While we learn to infer this over time there is some cognitive overhead as we
read. To combat this, I propose we take a cue from the <a href="http://www.python.org/dev/peps/pep-0020/">zen of
python</a>, which states <em>explicit is
better than implicit</em>. In that spirit, python provides <a href="http://docs.python.org/2/library/stdtypes.html#set.intersection">two
ways</a> to do set
intersections: the <code>&amp;</code> operator, and the <code>intersection</code> function.</p>

<p>Since ruby does not always provide named variants for ambiguous symbols this
provides us with an opportunity to refactor. When we encounter ambiguity, maybe
it&#39;s time to extract a method to describes the operation more explicitely than
<code>|</code> or <code>&amp;</code>.</p>

</section>

<hr />
<section id="post-tags">
  <p>Browse posts about:
  <ul>
  
  <li><a href="software">software</a></li>
  
  <li><a href="ruby">ruby</a></li>
  
  <li><a href="tapas">tapas</a></li>
  
  <li><a href="design">design</a></li>
  
  </ul></p>
</section>

<section id="newsletter-signup">
  <p>Want to get notified when I publish new articles or update old ones?
  Subscribe to my newsletter. It's a weekly-ish set of interesting links with a
  short essay on programming, design, technical leadership, or anything else
  that strikes my fancy.</p>

  <form id="subscribe-to-newsletter" action="https://tinyletter.com/zspencer" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/zspencer', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
  <p><label for="tlemail">Email address:</label>
  <input placeholder="your-email@example.com" type="text" name="email" id="tlemail" /></p>
  <input type="hidden" value="1" name="embed"/>

  <p>Not sure? <a id="newsletter-archive" href="http://tinyletter.com/zspencer/archive">Read the
    archive.</a></p>
  <input class="button" type="submit" value="Subscribe Now!" />
</form>

<script type="text/javascript">
Track.cta("#subscribe-to-newsletter", "Newsletter Subscription", {
  location: 'bottom',
  color: 'Red',
  category: 'Subscribe',
  pageSubject: 'Article'
});

Track.cta("#newsletter-archive", "Check the Newsletter Archive", {
  location: 'bottom',
  color: 'Red',
  category: 'Investigate me',
  pageSubject: 'Article'
});
</script>

</section>

  </main>
  <div class="push"></div>
  </div>
  <footer>
    <section id="footer-content">
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <p class="license">
        Copyright 2004 - 2020 Zee Spencer. Licensed under
        a <a
           rel="license"
           href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
           Commons Attribution-NonCommercial-ShareAlike 4.0
           International License</a>.
      </p>
    </section>
  </footer>

<script type="text/javascript">

</script>
</body>
</html>
<br />
      <a href="/ambiguity-is-an-opportunity-to-refactor">01 Feb 2013</a>
  </li>
  

  
  <li>What Mom and Dad Need to Know About the Rails Security Exploit &ndash;
      <!DOCTYPE html>
<html>
<head>
  <title>What Mom and Dad Need to Know About the Rails Security Exploit</title>
  <link href="style.css" type="text/css" rel="stylesheet" />
  
  <link rel="canonical" href="" />
  

  <link type="text/atom+xml" rel="alternate" href="http://feeds.feedburner.com/zeespencer"/>
  <meta name="viewport" content="initial-scale=1" />
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
      
      analytics.load("DEDSLhOPXKFCHg4NglvHWqtQg6BgqJy2");
      

      
        analytics.page();
      
      }}();
    </script>
    <script type="text/javascript" src="js/site.js"></script>
</head>
<body>
  <div id="page">
  <header>
    <figure>
      <img src="images/zee.png" alt="Zee Spencer" />
    </figure>
    
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <h2>What Mom and Dad Need to Know About the Rails Security Exploit</h2>
    

  </header>
  <main id="content">
    <section id="article">
<p>Dear Mom, Dad, Gramma, Brothers, Aunts and Uncles</p>

<p>I&#39;ve got some bad news. You may have some work to do to keep your private
information safe and prevent people from being able to impersonate you on the
Internet.</p>

<p>As you know, I&#39;m a computer programmer. Or a nerd. Or whatever. Essentially
people give me money to sit on my butt and get fatter. Yes Mom, I know I haven&#39;t
called in a few weeks. I&#39;m sorry. Anyway, my people have really let you all down
right now.</p>

<p>You see, there&#39;s a problem with the Internet right now. It&#39;s even worse because
Facebook, Twitter, and Google are central to our digital lives.</p>

<p>You know how when you sign in to Yelp on your phone it asks you to log in with
Facebook? Or how more and more web pages ask you to Log in with Google? Well,
that&#39;s gotten a bit more dangerous in the last month.</p>

<p>Essentially there is a security problem in a very common framework, called Ruby
on Rails. This framework runs a lot of websites. Websites like
<a href="http://meetup.com">Meetup.com</a>, tons of facebook games, and quite a few
business applications like <a href="http://www.getharvest.com/">Harvest</a></p>

<p>If an app you added on Facebook, Twitter, Google or LinkedIn is compromised it
gives the attacker the ability to do whatever that app is allowed to
do on facebook, twitter, google or linked in.</p>

<p>Even worse many of the applications we developers make are greedy about what we
want you to allow the app to do. Some social games require you to give them the
right to post things on your friends timeline before they&#39;ll even let you play!
What dirtbags, right?</p>

<p>I figured I should apologize for all of us, as well as inform
you of the risks that you are now being exposed to, as well as what steps to
take to make yourself a little safer.</p>

<h3 id="protecting-your-google-accounts">Protecting Your Google Accounts</h3>

<p>Google is the largest concern for me. I use it to log in to all kinds of things
and it has tons of my personal data in it. Including client lists, budgets, and
things like that.</p>

<p>Apps you log in to with Google can access all kinds of things; like your
contacts, email, calendar, documents in google drive, and even
your chat history if you use google chat!</p>

<p>Thankfully it&#39;s pretty straightforward to revoke access with Google, though a
bit time consuming. They have a <a href="http://support.google.com/accounts/bin/answer.py?hl=en&answer=41236">support page explaining
how</a>,
located here:
<a href="http://support.google.com/accounts/bin/answer.py?hl=en&answer=41236">http://support.google.com/accounts/bin/answer.py?hl=en&amp;answer=41236</a></p>

<h3 id="protecting-your-facebook-account">Protecting Your Facebook Account</h3>

<p>Most Facebook apps are allowed to get your contact information, many can post
status or pictures, and a few can add or remove friends.</p>

<p>If your not cool that some stranger on the Internet can someday possibly
impersonate you on Facebook, even if you change your password you may want to
follow
<a href="http://howto.cnet.com/8301-11310_39-57347928-285/how-to-revoke-facebook-app-permissions/">these
instructions</a>.</p>

<p>I know, I know. It&#39;s painful. You have to click twice per app you want to
remove, and if you&#39;re like me you somehow have accumulated dozens of them over
the years. Oops. I&#39;ll think twice before logging in with facebook!</p>

<h3 id="protecting-your-linked-in-account">Protecting Your Linked In Account</h3>

<p>Most LinkedIn apps can access your personal information, as well as
post updates to your timeline. Some can update your work history, or send
private messages.</p>

<p>It&#39;s easy to <a href="http://www.linkedin.com/answers/using-linkedIn/ULI/868108-1020804">revoke access on
LinkedIn</a>,
especially because there are so few apps for the platform!</p>

<h3 id="protecting-your-twitter-account">Protecting Your Twitter Account</h3>

<p>Most twitter apps can update your status, some can send DMs. A lot of my
personal brand is tied up in Twitter, so this is more important for me than
LinkedIn, but I&#39;m assuming the opposite is true for you.</p>

<p><a href="https://support.twitter.com/articles/76052-how-to-connect-and-revoke-third-party-applications">Revoking twitter
access</a>
is a joy compared to Facebook!</p>

<h3 id="the-thrilling-conclusion">The Thrilling Conclusion</h3>

<p>I would strongly recommend removing all access for Facebook, Twitter, Google,
and LinkedIn apps for the time being. If you <em>really need</em> whatever app it was,
contact the apps support team and ask them if they are using rails, and if so if
they are up to date with the latest security patches. If they say yes, then
you&#39;re good to go!</p>

<p>I wish I could say this was all you should be worried about, but we&#39;re in for a
bumpy ride over the next few months.</p>

<h3 id="more-details">More Details</h3>

<p>For a more detailed understanding of the security exploit, you should read this
article by <a href="http://www.kalzumeus.com/2013/01/31/what-the-rails-security-issue-means-for-your-startup/">Patrick
McKenzie</a>.</p>

<div class="call-to-action"><p>Are you a business owner or manager responsible
for a rails app? I'm available to help ensure your customers are safe. Just send
  me an email: <a href="mailto:
  zee@wecohere.com">zee@wecohere.com</a></p></div>

</section>

<hr />
<section id="post-tags">
  <p>Browse posts about:
  <ul>
  
  <li><a href="ruby">ruby</a></li>
  
  <li><a href="software">software</a></li>
  
  <li><a href="rails">rails</a></li>
  
  <li><a href="security">security</a></li>
  
  </ul></p>
</section>

<section id="newsletter-signup">
  <p>Want to get notified when I publish new articles or update old ones?
  Subscribe to my newsletter. It's a weekly-ish set of interesting links with a
  short essay on programming, design, technical leadership, or anything else
  that strikes my fancy.</p>

  <form id="subscribe-to-newsletter" action="https://tinyletter.com/zspencer" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/zspencer', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
  <p><label for="tlemail">Email address:</label>
  <input placeholder="your-email@example.com" type="text" name="email" id="tlemail" /></p>
  <input type="hidden" value="1" name="embed"/>

  <p>Not sure? <a id="newsletter-archive" href="http://tinyletter.com/zspencer/archive">Read the
    archive.</a></p>
  <input class="button" type="submit" value="Subscribe Now!" />
</form>

<script type="text/javascript">
Track.cta("#subscribe-to-newsletter", "Newsletter Subscription", {
  location: 'bottom',
  color: 'Red',
  category: 'Subscribe',
  pageSubject: 'Article'
});

Track.cta("#newsletter-archive", "Check the Newsletter Archive", {
  location: 'bottom',
  color: 'Red',
  category: 'Investigate me',
  pageSubject: 'Article'
});
</script>

</section>

  </main>
  <div class="push"></div>
  </div>
  <footer>
    <section id="footer-content">
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <p class="license">
        Copyright 2004 - 2020 Zee Spencer. Licensed under
        a <a
           rel="license"
           href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
           Commons Attribution-NonCommercial-ShareAlike 4.0
           International License</a>.
      </p>
    </section>
  </footer>

<script type="text/javascript">

</script>
</body>
</html>
<br />
      <a href="/what-mom-and-dad-need-to-know-about-the-current-security-breakdown">31 Jan 2013</a>
  </li>
  

  
  <li>The Ruby & Symbol &ndash;
      <!DOCTYPE html>
<html>
<head>
  <title>The Ruby & Symbol</title>
  <link href="style.css" type="text/css" rel="stylesheet" />
  
  <link rel="canonical" href="" />
  

  <link type="text/atom+xml" rel="alternate" href="http://feeds.feedburner.com/zeespencer"/>
  <meta name="viewport" content="initial-scale=1" />
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.0";
      
      analytics.load("DEDSLhOPXKFCHg4NglvHWqtQg6BgqJy2");
      

      
        analytics.page();
      
      }}();
    </script>
    <script type="text/javascript" src="js/site.js"></script>
</head>
<body>
  <div id="page">
  <header>
    <figure>
      <img src="images/zee.png" alt="Zee Spencer" />
    </figure>
    
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <h2>The Ruby & Symbol</h2>
    

  </header>
  <main id="content">
    <section id="article">
<p>&amp; is a powerful ruby operator, when you use it as a unary operator it has two
main use cases:</p>

<p>The most common is to pass an object as a block to a method, like this:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nf">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:nil?</span><span class="p">)</span></code></pre></figure>

<p>This calls <code>#to_proc</code> on the symbol <code>:nil?</code>, converts the result into a block,
and passes it to the reject method. A line by line breakdown looks something
like this:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span> <span class="mi">3</span><span class="p">].</span><span class="nf">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:nil?</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="nb">proc</span> <span class="o">=</span> <span class="ss">:nil?</span><span class="p">.</span><span class="nf">to_proc</span><span class="p">))</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">reject</span><span class="p">(</span><span class="o">&amp;</span><span class="nb">proc</span><span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="mi">3</span><span class="p">].</span><span class="nf">reject</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">e</span><span class="p">.</span><span class="nf">nil?</span> <span class="p">}</span></code></pre></figure>

<p>The second is explicitly declaring a block by using the <code>&amp;</code> in a method
definition:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">print_results</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="nb">p</span> <span class="n">block</span><span class="p">.</span><span class="nf">yield</span>
<span class="k">end</span>

<span class="n">print_results</span> <span class="p">{</span> <span class="s2">"bar"</span> <span class="p">}</span></code></pre></figure>

<p>With an explicitly named block you can do useful things, like map a block to
all the columns in a table:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">column_map</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="n">table</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">row</span><span class="o">|</span> <span class="n">row</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>

<span class="n">column_map</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]])</span> <span class="p">{</span> <span class="o">|</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">5</span> <span class="p">}</span></code></pre></figure>

<p>And of course, explicitly named blocks still allow you to expand an object to a
block:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">column_map</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]],</span> <span class="o">&amp;</span><span class="ss">:odd?</span><span class="p">)</span></code></pre></figure>

<p>For more reading on the &amp; operator, check out  <em><a href="http://ablogaboutcode.com/2012/01/04/the-ampersand-operator-in-ruby/">The Ampersand Operator in
Ruby</a></em> by
<a href="https://twitter.com/panthomakos">Pan Thomakos</a>.</p>

<p>I you want to grok blocks, I&#39;d recommend the excellent <em><a href="http://www.robertsosinski.com/2008/12/21/understanding-ruby-blocks-procs-and-lambdas/">Understanding Ruby
Blocks, Procs and
Lambdas</a></em>
by <a href="http://www.robertsosinski.com/">Robert Sosinki</a></p>

</section>

<hr />
<section id="post-tags">
  <p>Browse posts about:
  <ul>
  
  <li><a href="software">software</a></li>
  
  <li><a href="ruby">ruby</a></li>
  
  <li><a href="tapas">tapas</a></li>
  
  </ul></p>
</section>

<section id="newsletter-signup">
  <p>Want to get notified when I publish new articles or update old ones?
  Subscribe to my newsletter. It's a weekly-ish set of interesting links with a
  short essay on programming, design, technical leadership, or anything else
  that strikes my fancy.</p>

  <form id="subscribe-to-newsletter" action="https://tinyletter.com/zspencer" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/zspencer', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
  <p><label for="tlemail">Email address:</label>
  <input placeholder="your-email@example.com" type="text" name="email" id="tlemail" /></p>
  <input type="hidden" value="1" name="embed"/>

  <p>Not sure? <a id="newsletter-archive" href="http://tinyletter.com/zspencer/archive">Read the
    archive.</a></p>
  <input class="button" type="submit" value="Subscribe Now!" />
</form>

<script type="text/javascript">
Track.cta("#subscribe-to-newsletter", "Newsletter Subscription", {
  location: 'bottom',
  color: 'Red',
  category: 'Subscribe',
  pageSubject: 'Article'
});

Track.cta("#newsletter-archive", "Check the Newsletter Archive", {
  location: 'bottom',
  color: 'Red',
  category: 'Investigate me',
  pageSubject: 'Article'
});
</script>

</section>

  </main>
  <div class="push"></div>
  </div>
  <footer>
    <section id="footer-content">
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <p class="license">
        Copyright 2004 - 2020 Zee Spencer. Licensed under
        a <a
           rel="license"
           href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
           Commons Attribution-NonCommercial-ShareAlike 4.0
           International License</a>.
      </p>
    </section>
  </footer>

<script type="text/javascript">

</script>
</body>
</html>
<br />
      <a href="/the-ruby-&-symbol">30 Jan 2013</a>
  </li>
  

</ul>

<div id="tag-cloud">
  <h3>Find something to read in the following topics:</h3>
  Jekyll::Drops::SiteDrop
</div>


  </main>
  <div class="push"></div>
  </div>
  <footer>
    <section id="footer-content">
      <nav>
  <a href="/">Explore</a>
  <a href="/newsletter.html">Subscribe to my Newsletter</a>
  <a href="/contact.html">Contact Me</a>
  <a class="twitter" href="http://twitter.com/zspencer">Twitter</a>
  <a class="github" href="http://github.com/zspencer">Github</a>
  <a class="rss" href="http://feeds.feedburner.com/zeespencer">RSS</a>
</nav>

      <p class="license">
        Copyright 2004 - 2020 Zee Spencer. Licensed under
        a <a
           rel="license"
           href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative
           Commons Attribution-NonCommercial-ShareAlike 4.0
           International License</a>.
      </p>
    </section>
  </footer>

<script type="text/javascript">

</script>
</body>
</html>
